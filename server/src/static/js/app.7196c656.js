(function(){"use strict";var e={4071:function(e,t,n){var a=n(9242),i=n(3396),l=n(7139);const r=(0,i._)("h1",{class:"tittle"},"Ping Charts",-1),o={class:"overflow-box"},s={key:0,class:"content-table"},c=(0,i._)("th",{style:{position:"sticky",left:"0",background:"#009879"}}," Name ",-1),u=(0,i._)("th",null," Label ",-1),d={style:{position:"sticky",left:"0",background:"#f3f3f3"}};function h(e,t,n,a,h,g){const v=(0,i.up)("radio-com"),f=(0,i.up)("bar-chart");return(0,i.wg)(),(0,i.iD)(i.HY,null,[r,(0,i.Wm)(v,{initModel:h.judgeLevel,uid:h.levelUid,items:h.levelItems,info:h.levelInfo,onOptionSelected:g.changeLevel},null,8,["initModel","uid","items","info","onOptionSelected"]),(0,i.Wm)(v,{initModel:h.min,uid:h.minUid,items:h.minItems,info:h.minInfo,initSelect:3,onOptionSelected:g.changeMin},null,8,["initModel","uid","items","info","onOptionSelected"]),(0,i._)("div",o,[h.isTableVisible?((0,i.wg)(),(0,i.iD)("table",s,[(0,i._)("thead",null,[(0,i._)("tr",null,[c,u,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.targets,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t},(0,l.zw)(e),1)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.rows,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",d,(0,l.zw)(e.name),1),(0,i._)("td",null,(0,l.zw)(e.label),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.chartDataList,((e,t)=>((0,i.wg)(),(0,i.iD)("td",{key:t,class:"chart"},[(0,i.Wm)(f,{chartData:e,judgeLevel:h.judgeLevel},null,8,["chartData","judgeLevel"])])))),128))])))),128))])])):(0,i.kq)("",!0)])],64)}var g=n(4161);const v={key:0};function f(e,t,n,a,r,o){const s=(0,i.up)("Bar");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s,{height:"26",data:r.data,options:r.options},null,8,["data","options"]),r.averageDelay?((0,i.wg)(),(0,i.iD)("span",v,(0,l.zw)(r.averageDelay)+"ms",1)):(0,i.kq)("",!0)],64)}n(7658);const m={strict:1,lenient:2,much_lenient:3},p={green:0,yellow:.05,red:1},b={green:.05,yellow:.1,red:1},w={green:.1,yellow:.3,red:1},y=350;var D=n(5866),S=n(9646);S.kL.register(S.Dx,S.u,S.De,S.ZL,S.uw,S.f$);var k={components:{Bar:D.$Q},props:{chartData:{type:Object,required:!0},judgeLevel:{type:Number,required:!0}},data(){return{options:{categoryPercentage:1,barPercentage:1,scales:{x:{display:!1},y:{display:!1,max:y,min:0,ticks:{stepSize:50}}},plugins:{legend:{display:!1},tooltip:{enabled:!0}},animation:!0},data:this.generageData(),averageDelay:(e=>{let t=e.reduce(((e,t)=>e+t),0)/e.length;return t?t.toFixed(2):0})(this.chartData.delay)}},watch:{judgeLevel:{immediate:!0,handler(){this.data=this.generageData()}}},methods:{timeConverter(e){let t=new Date(1e3*e),n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${n}-${a}-${i} ${l}:${r}:${o}`},getLabels(){let e=[];for(let t=0;t<this.chartData.time.length;t++){let n=this.timeConverter(this.chartData.time[t]),a=this.chartData.loss[t],i=this.chartData.delay[t];const l=`${n} delay: ${i.toFixed(2)}ms loss: ${a.toFixed(2)}`;e.push(l)}return e},generageData(){return{labels:this.getLabels(),datasets:[{data:this.chartData.delay,backgroundColor:function(e){var t,n=this.chartData.loss[e.dataIndex];switch(this.judgeLevel){case m.strict:t=p;break;case m.lenient:t=b;break;case m.much_lenient:t=w;break}return n<=t.green?"green":n<=t.yellow?"orange":"red"}.bind(this)}]}}}},_=n(89);const L=(0,_.Z)(k,[["render",f]]);var O=L;const j={class:"radio-container"},x={class:"tabs"},I={class:"tab info"},C=["id","value"],$=["for","onClick"];function M(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",x,[(0,i._)("label",I,(0,l.zw)(n.info),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.items,((e,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r},[(0,i.wy)((0,i._)("input",{type:"radio",id:n.uid+r,value:e.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.model=e)},null,8,C),[[a.G2,o.model]]),(0,i._)("label",{class:"tab",for:n.uid+r,onClick:e=>s.changeSelect(r)},(0,l.zw)(e.label),9,$)])))),128)),(0,i._)("span",{class:"glider",style:(0,l.j5)(`--radio-index: ${o.select};`)},null,4)])])}var H={props:{uid:String,info:String,initModel:Number,initSelect:Number,items:Array},data(){return{model:this.initModel,select:this.initSelect?this.initSelect:1}},watch:{model(e){this.$emit("option-selected",e)}},methods:{changeSelect(e){this.select=e+1}}};const N=(0,_.Z)(H,[["render",M],["__scopeId","data-v-1fe85a1c"]]);var T=N,z={name:"App",components:{BarChart:O,RadioCom:T},data(){return{targets:["CHINANET","CHINAUNION","CHINAMOBLE"],rows:{},judgeLevel:m.strict,isTableVisible:!1,levels:m,levelUid:"level",levelInfo:"Select Level",levelItems:[{value:m.strict,label:"strict"},{value:m.lenient,label:"lenient"},{value:m.much_lenient,label:"much lenient"}],min:60,minUid:"min",minInfo:"Select Time",minItems:[{value:5,label:"5min"},{value:30,label:"30min"},{value:60,label:"1h"},{value:180,label:"3h"},{value:1440,label:"1d"},{value:10080,label:"7d"}]}},mounted(){this.fetchData()},methods:{fetchData(){this.isTableVisible=!1,g.Z.get("./data?min="+this.min).then((e=>{this.targets=e.data.targets,this.rows=e.data.rows,this.isTableVisible=!0})).catch((e=>{console.log(e)}))},changeLevel(e){this.judgeLevel=e},changeMin(e){this.min=e}},watch:{min(){this.fetchData()}}};const Y=(0,_.Z)(z,[["render",h]]);var U=Y;(0,a.ri)(U).mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,l){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],l=e[u][2];for(var o=!0,s=0;s<a.length;s++)(!1&l||r>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(o=!1,l<r&&(r=l));if(o){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,i,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,r=a[0],o=a[1],s=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(s)var u=s(n)}for(t&&t(a);c<r.length;c++)l=r[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},a=self["webpackChunkping_charts"]=self["webpackChunkping_charts"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4071)}));a=n.O(a)})();
//# sourceMappingURL=app.7196c656.js.map